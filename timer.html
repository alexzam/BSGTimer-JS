<!DOCTYPE html>
<html>
<body>
<script type="text/javascript" src="jquery-1.5.2.min.js"></script>
<style type="text/css">@import "jquery.svg.css";</style> 
<script type="text/javascript" src="jquery.svg.min.js"></script>
<script type="text/javascript" src="jquery.svgdom.min.js"></script>
<style>
	@font-face{
		font-family: Digital;
		src: url(DigifaceRegular.ttf);
	}

	.inact{
		fill:none;
	}
	.act{
		fill:#F5B800;
	}
	body{
		background-color:black;
	}
</style>
<script>
var timesvg;
var targetDate = new Date(2011, 6, 29, 20, 0, 0, 0);

function drawSegments(svg, parent,n,k,r1,r2,id){
	var i = 0;
	while(i<n){
		var a=2*Math.PI*i/n;
		var b=2*Math.PI*(i+k)/n;
		var path = svg.createPath();
		svg.path(parent,
			path.move((r2*Math.sin(a)), (-r2*Math.cos(a)))
				.arc(r2, r2, 0, 0, 1, (r2*Math.sin(b)), (-r2*Math.cos(b)))
				.line((r1*Math.sin(b)), (-r1*Math.cos(b)))
				.arc(r1, r1, 0, 0, 0, (r1*Math.sin(a)), (-r1*Math.cos(a)))
				.close()
			,
			{stroke:"black",strokeWidth:"1",class:'sector '+id, id:id+i, val:i}
		);
		i++;
	}
}

function fillSectors(id, num){
	var circle = $('.sector', timesvg.root())
		.filter('.'+id);

	circle.filter(':gt('+num+')')
		.add(circle.filter(':eq('+num+')'))
		.addClass('inact')
		.removeClass('act');
	circle.filter(':lt('+num+'),')
		.addClass('act')
		.removeClass('inact');
}

function setRest(msec){
	var rest = Math.floor(msec / 1000);
	var cur = rest % 60;
	var text = ((cur<10)?'0':'') + cur;
	fillSectors('s', cur);

	rest = Math.floor(rest / 60);
	cur = rest % 60;
	text = ((cur<10)?'0':'') + cur + text;
	fillSectors('m', cur);

	rest = Math.floor(rest / 60);
	cur = rest % 24;
	text = ((cur<10)?' 0':' ') + cur + text;
	fillSectors('h', cur);

	rest = Math.floor(rest / 24);
	cur = rest % 31;
	text = ((cur<10)?'0':'') + cur + text;
	fillSectors('d', cur);

	rest = Math.floor(rest / 31);
	text = '' + (rest % 31) + text;
	fillSectors('mo', rest % 12);

	$('#time', timesvg.root()).text(text);
	setTimeout('updateTimer()', 1000);
}

function updateTimer(){
	setRest(targetDate.getTime() - (new Date()).getTime());
}

$(function(){
	$('#clk').svg(function(svg){
		timesvg = svg;
		var g = svg.group({transform:"translate(250,250)"});
		svg.circle(g, 0, 0, 200, {fill: 'none', stroke: 'black', strokeWidth: 1});

		drawSegments(svg, g, 60, 0.85, 187, 197, 's');
		drawSegments(svg, g, 60, 0.85, 174, 184, 'm');
		drawSegments(svg, g, 24, 0.9, 161, 171, 'h');
		drawSegments(svg, g, 31, 0.85, 148, 158, 'd');
		drawSegments(svg, g, 12, 0.93, 135, 145, 'mo');

		svg.text(g, 0, 25, "Yooo 1234", {fontFamily:"Digital", fontSize:50, textAnchor:'middle', class:'act', id:'time'});
		$('.sector', svg.root()).addClass('act');
		$('#time', svg.root()).text('000 000000');

		setTimeout('updateTimer()', 1000);
	});
});
</script>

<div id="clk"></div>

</body>
</html>